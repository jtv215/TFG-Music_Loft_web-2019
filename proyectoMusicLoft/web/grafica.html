<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />

<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="micss.css" rel="stylesheet" type="text/css" />
<script src="https://code.jquery.com/jquery-2.2.2.min.js" type="text/javascript"> </script> 
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
 <!-- Plotly.js -->
 <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
 <!-- Numeric JS -->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js"></script>

<script>
		$(document).ready(function(){	
	
		
				function obtenerDatosGrafica1(){	
					var idLocal = sessionStorage.getItem("id");	
				
					var parametros ={
						"idLocal":idLocal
						};
	
					$.ajax({
						url:'Funciones/obtenerDatosGrafica1.php',
						type:'POST',
						cache: false,
						dataType: 'json',
						data: parametros,															
						success: function (resp){				
						
						var nombre1= resp[0]['titulo'];
						var nombre2= resp[1]['titulo'];
						var nombre3= resp[2]['titulo'];
						var nombre4= resp[3]['titulo'];
						var nombre5= resp[4]['titulo'];
	
						var cont1= resp[0]['contador'];
						var cont2= resp[1]['contador'];
						var cont3= resp[2]['contador'];
						var cont4= resp[3]['contador'];
						var cont5= resp[4]['contador'];
	
	
						var data = [{
						x: [nombre1, nombre2, nombre3, nombre4, nombre5],
						y: [cont1, cont2, cont3, cont4, cont5],
						type: 'bar'
						}];
						Plotly.newPlot('myDiv', data, {}, {showSendToCloud:true});
	
						}//cierra el succes
						});//cierra ajax
					return false;
				}
				obtenerDatosGrafica1();

				function obtenerDatosGrafica2(){	
					var idLocal = sessionStorage.getItem("id");	
				
					var parametros ={
						"idLocal":idLocal
						};
	
					$.ajax({
						url:'Funciones/obtenerDatosGrafica2.php',
						type:'POST',
						cache: false,
						dataType: 'json',
						data: parametros,															
						success: function (resp){				
						
						var hombres= resp[0]['hombres'];						
						var mujeres= resp[0]['mujeres'];			
	
						var data = [{
						values: [hombres,mujeres ],
						labels: ['Hombres', 'Mujeres'],
						type: 'pie'
						}];

						Plotly.newPlot('graficaCircular', data, {}, {showSendToCloud:true});
	
						}//cierra el succes
						});//cierra ajax
					return false;
				}
				obtenerDatosGrafica2();





	});//cierro el ready
	
	</script>


</head>
<body>

<div id="contenedor">

<!--barra Arriba-->
<div id="ParteArriba">
	<div class="nombreLogo">Music-Loft</div>
	<div class="logo"><img class="logo" src="img/logo.png" alt="Music-Loft" /></div>
</div>

<!--barra lateral Izquierda-->
<div id="barralateral">
	<ul id="lateralizq">
		<li><span class="titulo">Menú</span></li>
		<li><a href="index2.html"><span class="subtitulo">Inicio</span></a></li>
		<li><a href="subirCancion.html"><span class="subtitulo">Subir Canción</span></a></li>
		<li><a href="editarLista.html"><span class="subtitulo">Editar Lista</span></a></li>
		<li><a href="editarDatosPersonales.html"><span class="subtitulo">Datos Personales</span></a></li>	
		<li><a href="grafica.html"><span class="subtitulo">Ver Gráficas</span></a></li>	
		<li id="salir"><a href="index.html"><span class="subtitulo" >Cerrar sesión</span></a></li>
	</ul>
</div>

	<!--contenido principal Formulario-->
	<div id="principal">
			
		<div class="envolturaGrafica">	
			<div id= "columnaVacia"></div>
			<div class="nombre-seccion">
					<span> Top 5 Canciones más Votadas</span>
					<p id="demo"></p>
				</div>
			<div id="grafica1">		
				<div id="myDiv"><!-- Plotly chart will be drawn inside this DIV --></div>
			</div>

			<div class="nombre-seccion">
					<span>¿Quién usa más la aplicación?</span>
					<p id="demo"></p>
				</div>
			<div id="grafica2">
					<div id="graficaCircular"><!-- Plotly chart will be drawn inside this DIV --></div>
				</div>
			
		</div>

		
	
	</div>
</div>



</body>

</html>
